{"version":3,"file":"index.umd.js","sources":["../src/utils/asyncPopulate.js","../src/Factory.js","../src/generators/Generator.js","../src/generators/Sequence.js","../src/generators/Assoc.js","../src/generators/AssocAttrs.js","../src/generators/AssocMany.js","../src/generators/AssocAttrsMany.js","../src/generators/ChanceGenerator.js","../src/generators/OneOf.js","../src/adapters/DefaultAdapter.js","../src/FactoryGirl.js","../src/adapters/ObjectAdapter.js","../src/adapters/BookshelfAdapter.js","../src/adapters/MongooseAdapter.js","../src/adapters/SequelizeAdapter.js","../src/adapters/ReduxORMAdapter.js","../src/index.js"],"sourcesContent":["/* eslint-disable no-underscore-dangle */\nexport default function asyncPopulate(target, source) {\n  if (typeof target !== 'object') {\n    return Promise.reject(new Error('Invalid target passed'));\n  }\n  if (typeof source !== 'object') {\n    return Promise.reject(new Error('Invalid source passed'));\n  }\n\n  const promises = Object.keys(source).map(attr => {\n    let promise;\n    if (Array.isArray(source[attr])) {\n      target[attr] = [];\n      promise = asyncPopulate(target[attr], source[attr]);\n    } else if (source[attr] === null) {\n      target[attr] = null;\n    } else if (typeof source[attr] === 'undefined') {\n      target[attr] = undefined;\n    } else if (isPlainObject(source[attr])) {\n      target[attr] = target[attr] || {};\n      promise = asyncPopulate(target[attr], source[attr]);\n    } else if (typeof source[attr] === 'function') {\n      promise = Promise.resolve(source[attr]()).then(v => { target[attr] = v; });\n    } else {\n      promise = Promise.resolve(source[attr]).then(v => { target[attr] = v; });\n    }\n    return promise;\n  });\n  return Promise.all(promises);\n}\n/* eslint-enable no-underscore-dangle */\n\nconst objectProto = Object.getPrototypeOf({});\nfunction isPlainObject(o) {\n  return Object.getPrototypeOf(o) === objectProto;\n}\n","import Promise from 'bluebird';\nimport asyncPopulate from './utils/asyncPopulate';\n\nexport default class Factory {\n  name = null;\n  Model = null;\n  initializer = null;\n  options = {};\n\n  constructor(Model, initializer, options = {}) {\n    if (!Model) {\n      throw new Error('Invalid Model constructor passed to the factory');\n    }\n    if ((typeof initializer !== 'object' && typeof initializer !== 'function') ||\n        !initializer) {\n      throw new Error('Invalid initializer passed to the factory');\n    }\n\n    this.Model = Model;\n    this.initializer = initializer;\n    this.options = { ...this.options, ...options };\n  }\n\n  getFactoryAttrs(buildOptions = {}) {\n    let attrs;\n    if (typeof this.initializer === 'function') {\n      attrs = this.initializer(buildOptions);\n    } else {\n      attrs = { ...this.initializer };\n    }\n    return Promise.resolve(attrs);\n  }\n\n  async attrs(extraAttrs = {}, buildOptions = {}) {\n    const factoryAttrs = await this.getFactoryAttrs(buildOptions);\n    const modelAttrs = {};\n\n    const filteredAttrs = Object.keys(factoryAttrs).reduce((attrs, name) => {\n      if (!extraAttrs.hasOwnProperty(name)) attrs[name] = factoryAttrs[name];\n      return attrs;\n    }, {});\n\n    await asyncPopulate(modelAttrs, filteredAttrs);\n    await asyncPopulate(modelAttrs, extraAttrs);\n\n    if (!this.options.afterAttrs) {\n      return modelAttrs;\n    }\n\n    return this.options.afterAttrs(modelAttrs, extraAttrs, buildOptions);\n  }\n\n  async build(adapter, extraAttrs = {}, buildOptions = {}, buildCallbacks = true) {\n    const modelAttrs = await this.attrs(extraAttrs, buildOptions);\n    const model = adapter.build(this.Model, modelAttrs);\n    if (!this.options.afterBuild || !buildCallbacks) {\n      return Promise.resolve(model);\n    }\n    return this.options.afterBuild(model, extraAttrs, buildOptions);\n  }\n\n  async create(adapter, attrs = {}, buildOptions = {}, buildCallbacks = true) {\n    const buildModel = await this.build(adapter, attrs, buildOptions, buildCallbacks);\n\n    const beforeCreate = this.options.beforeCreate ?\n      this.options.beforeCreate(buildModel, attrs, buildOptions) : buildModel;\n    return Promise.resolve(beforeCreate)\n      .then(model => adapter.save(model, this.Model))\n      .then(savedModel => (this.options.afterCreate ?\n          this.options.afterCreate(savedModel, attrs, buildOptions) :\n          savedModel\n      ));\n  }\n\n  async attrsMany(numArg, attrsArrayArg = [], buildOptionsArrayArg = []) {\n    const {\n      num,\n      attrsArray,\n      buildOptionsArray,\n    } = await parseAndValidateManyArgs(numArg, attrsArrayArg, buildOptionsArrayArg);\n\n    const models = [];\n    for (let i = 0; i < num; i++) {\n      models.push(await this.attrs(attrsArray[i], buildOptionsArray[i]));\n    }\n    return models;\n  }\n\n  async buildMany(adapter, numArg, attrsArrayArg = [], buildOptionsArrayArg = [],\n      buildCallbacks = true) {\n    const {\n      num,\n      attrsArray,\n      buildOptionsArray,\n    } = await parseAndValidateManyArgs(numArg, attrsArrayArg, buildOptionsArrayArg);\n\n    const models = [];\n    for (let i = 0; i < num; ++i) {\n      models.push(\n        await this.build(adapter, attrsArray[i], buildOptionsArray[i], buildCallbacks),\n      );\n    }\n    return models;\n  }\n\n  async createMany(adapter, numArg, attrsArrayArg = [], buildOptionsArrayArg = [],\n                   buildCallbacks = true) {\n    const {\n      num,\n      attrsArray,\n      buildOptionsArray,\n    } = await parseAndValidateManyArgs(numArg, attrsArrayArg, buildOptionsArrayArg);\n\n    const models = [];\n    for (let i = 0; i < num; ++i) {\n      models.push(\n        await this.create(adapter, attrsArray[i], buildOptionsArray[i],\n          buildCallbacks),\n      );\n    }\n    return models;\n  }\n}\n\nasync function parseAndValidateManyArgs(num, attrsArray = {}, buildOptionsArray = {}) {\n  if (Array.isArray(num)) {\n    buildOptionsArray = attrsArray;\n    attrsArray = num;\n    num = attrsArray.length;\n  }\n  if (!attrsArray || attrsArray.length === 0) {\n    attrsArray = {};\n  }\n  if ((typeof attrsArray === 'object' && !Array.isArray(attrsArray))) {\n    attrsArray = createArrayOfObjects(num, attrsArray || {});\n  }\n  if (attrsArray.length !== num) {\n    throw new Error('attrs argument should be an object or an array equal to the ' +\n      'amount of objects being built or created. You passed  ' +\n      `attrs.length = ${attrsArray.length}. It should be ${num}`);\n  }\n  if (!buildOptionsArray || buildOptionsArray.length === 0) {\n    buildOptionsArray = {};\n  }\n  if ((typeof buildOptionsArray === 'object' && !Array.isArray(buildOptionsArray))) {\n    buildOptionsArray = createArrayOfObjects(num, buildOptionsArray || {});\n  }\n  if (buildOptionsArray.length !== num) {\n    throw new Error('buildOptions argument should be an object or an array equal to ' +\n      'the amount of objects being built or created. You passed  ' +\n      `buildOptions.length = ${buildOptionsArray.length}. It should be ${num}`);\n  }\n  if (typeof num !== 'number' || num < 1) {\n    throw new Error('Invalid number of objects requested');\n  }\n  if (!Array.isArray(attrsArray)) {\n    throw new Error('Invalid attrsArray passed');\n  }\n  if (!Array.isArray(buildOptionsArray)) {\n    throw new Error('Invalid buildOptionsArray passed');\n  }\n  return { num, attrsArray, buildOptionsArray };\n}\n\nfunction createArrayOfObjects(num, obj) {\n  const arr = [];\n  for (let i = 0; i < num; ++i) {\n    arr.push(Object.assign({}, obj));\n  }\n  return arr;\n}\n","\nexport default class Generator {\n  constructor(factoryGirl) {\n    if (!factoryGirl) {\n      throw new Error('No FactoryGirl instance provided');\n    }\n    this.factoryGirl = factoryGirl;\n  }\n\n  generate() {\n    throw new Error('Override this method to generate a value');\n  }\n\n  getAttribute(name, model, key) {\n    return this.factoryGirl.getAdapter(name).get(model, key);\n  }\n}\n","\nimport Generator from './Generator';\n\nexport default class Sequence extends Generator {\n  static sequences = {};\n\n  static reset(id = null) {\n    if (!id) {\n      Sequence.sequences = {};\n    } else {\n      Sequence.sequences[id] = undefined;\n    }\n  }\n\n  generate(id = null, callback = null) {\n    if (typeof id === 'function') {\n      callback = id;\n      id = null;\n    }\n    id = id || this.id || (this.id = generateId());\n    Sequence.sequences[id] = Sequence.sequences[id] || 1;\n    const next = Sequence.sequences[id]++;\n    return callback ? callback(next) : next;\n  }\n}\n\nfunction generateId() {\n  let id;\n  let i = 0;\n  do {\n    id = `_${i++}`;\n  } while (id in Sequence.sequences);\n  return id;\n}\n","\nimport Generator from './Generator';\n\nexport default class Assoc extends Generator {\n  async generate(name, key = null, attrs = {}, buildOptions = {}) {\n    const model = await this.factoryGirl.create(name, attrs, buildOptions);\n    return key ? this.getAttribute(name, model, key) : model;\n  }\n}\n","\nimport Generator from './Generator';\n\nexport default class AssocAttrs extends Generator {\n  async generate(name, key = null, attrs = {}, buildOptions = {}) {\n    const model = await this.factoryGirl.attrs(name, attrs, buildOptions);\n    return key ? this.getAttribute(name, model, key) : model;\n  }\n}\n","\nimport Generator from './Generator';\n\nexport default class AssocMany extends Generator {\n  async generate(name, num, key = null, attrs = {}, buildOptions = {}) {\n    const models = await this.factoryGirl.createMany(name, num, attrs, buildOptions);\n    return key ? models.map(model => this.getAttribute(name, model, key)) : models;\n  }\n}\n","\n\nimport Generator from './Generator';\n\nexport default class AssocAttrsMany extends Generator {\n  async generate(name, num, key = null, attrs = {}, buildOptions = {}) {\n    if (typeof num !== 'number' || num < 1) {\n      throw new Error('Invalid number of items requested');\n    }\n    const models = await this.factoryGirl.attrsMany(name, num, attrs, buildOptions);\n    return key ? models.map(model => this.getAttribute(name, model, key)) : models;\n  }\n}\n","\nimport Generator from './Generator';\nimport Chance from 'chance';\n\nconst chance = new Chance();\n\nexport default class ChanceGenerator extends Generator {\n  generate(chanceMethod, ...options) {\n    if (typeof chance[chanceMethod] !== 'function') {\n      throw new Error('Invalid chance method requested');\n    }\n    return chance[chanceMethod](...options);\n  }\n}\n","\nimport Generator from './Generator';\n\nexport default class OneOf extends Generator {\n  async generate(possibleValues) {\n    if (!Array.isArray(possibleValues)) {\n      throw new Error('Expected an array of possible values');\n    }\n\n    if (possibleValues.length < 1) {\n      throw new Error('Empty array passed for possible values');\n    }\n\n    const size = possibleValues.length;\n    const randomIndex = Math.floor(Math.random() * size);\n    const value = possibleValues[randomIndex];\n    return (typeof value === 'function') ? value() : value;\n  }\n}\n","/* eslint-disable no-unused-vars */\nexport default class DefaultAdapter {\n  build(Model, props) {\n    return new Model(props);\n  }\n  async save(model, Model) {\n    return Promise.resolve(model.save()).then(() => model);\n  }\n  async destroy(model, Model) {\n    return Promise.resolve(model.destroy()).then(() => model);\n  }\n  get(model, attr, Model) {\n    return model.get(attr);\n  }\n  set(props, model, Model) {\n    return model.set(props);\n  }\n}\n","import Factory from './Factory';\nimport Sequence from './generators/Sequence';\nimport Assoc from './generators/Assoc';\nimport AssocAttrs from './generators/AssocAttrs';\nimport AssocMany from './generators/AssocMany';\nimport AssocAttrsMany from './generators/AssocAttrsMany';\nimport ChanceGenerator from './generators/ChanceGenerator';\nimport OneOf from './generators/OneOf';\nimport DefaultAdapter from './adapters/DefaultAdapter';\n\nexport default class FactoryGirl {\n  factories = {};\n  options = {};\n  adapters = {};\n  created = new Set();\n\n  constructor(options = {}) {\n    this.assoc = generatorThunk(this, Assoc);\n    this.assocMany = generatorThunk(this, AssocMany);\n    this.assocBuild = deprecate('assocBuild', 'assocAttrs');\n    this.assocBuildMany = deprecate('assocBuildMany', 'assocAttrsMany');\n    this.assocAttrs = generatorThunk(this, AssocAttrs);\n    this.assocAttrsMany = generatorThunk(this, AssocAttrsMany);\n    this.seq = this.sequence =\n      (...args) => generatorThunk(this, Sequence)(...args);\n    this.resetSeq = this.resetSequence = id => { Sequence.reset(id); };\n    this.chance = generatorThunk(this, ChanceGenerator);\n    this.oneOf = generatorThunk(this, OneOf);\n\n    this.defaultAdapter = new DefaultAdapter;\n    this.options = options;\n  }\n\n  define(name, Model, initializer, options = {}) {\n    if (this.getFactory(name, false)) {\n      throw new Error(`Factory ${name} already defined`);\n    }\n    const factory = this.factories[name] = new Factory(Model, initializer, options);\n    return factory;\n  }\n\n  extend(parent, name, childInitializer, options = {}) {\n    if (this.getFactory(name, false)) {\n      throw new Error(`Factory ${name} already defined`);\n    }\n    const parentFactory = this.getFactory(parent, true);\n    const Model = options.model || parentFactory.Model;\n    let jointInitializer;\n\n    function resolveInitializer(initializer, buildOptions) {\n      return typeof initializer === 'function' ? initializer(buildOptions) : initializer;\n    }\n\n    if (\n      typeof parentFactory.initializer === 'function' ||\n      typeof childInitializer === 'function'\n    ) {\n      jointInitializer = function initializer(buildOptions = {}) {\n        return Object.assign(\n          {},\n          resolveInitializer(parentFactory.initializer, buildOptions),\n          resolveInitializer(childInitializer, buildOptions)\n        );\n      };\n    } else {\n      jointInitializer = Object.assign({}, parentFactory.initializer, childInitializer);\n    }\n\n    const factory = this.factories[name] = new Factory(Model, jointInitializer, options);\n    return factory;\n  }\n\n  async attrs(name, attrs, buildOptions = {}) {\n    return this.getFactory(name).attrs(attrs, buildOptions);\n  }\n\n  async build(name, attrs = {}, buildOptions = {}) {\n    const adapter = this.getAdapter(name);\n    return this.getFactory(name)\n      .build(adapter, attrs, buildOptions)\n      .then(model => (this.options.afterBuild ?\n          this.options.afterBuild(model, attrs, buildOptions) :\n          model\n      ));\n  }\n\n  async create(name, attrs, buildOptions = {}) {\n    const adapter = this.getAdapter(name);\n    return this.getFactory(name)\n      .create(adapter, attrs, buildOptions)\n      .then(createdModel => this.addToCreatedList(adapter, createdModel))\n      .then(model => (this.options.afterCreate ?\n          this.options.afterCreate(model, attrs, buildOptions) :\n          model\n      ));\n  }\n\n  attrsMany(name, num, attrs, buildOptions = {}) {\n    return this.getFactory(name).attrsMany(num, attrs, buildOptions);\n  }\n\n  async buildMany(name, num, attrs, buildOptions = {}) {\n    const adapter = this.getAdapter(name);\n    return this.getFactory(name)\n      .buildMany(adapter, num, attrs, buildOptions)\n      .then(models => (this.options.afterBuild ?\n          Promise.all(models.map(\n            model => this.options.afterBuild(model, attrs, buildOptions)\n          )) :\n          models\n      ));\n  }\n\n  async createMany(name, num, attrs, buildOptions = {}) {\n    const adapter = this.getAdapter(name);\n    return this.getFactory(name)\n      .createMany(adapter, num, attrs, buildOptions)\n      .then(models => this.addToCreatedList(adapter, models))\n      .then(models => (this.options.afterCreate ?\n          Promise.all(models.map(\n            model => this.options.afterCreate(model, attrs, buildOptions)\n          )) :\n          models\n      ));\n  }\n\n  getFactory(name, throwError = true) {\n    if (!this.factories[name] && throwError) {\n      throw new Error(`Invalid factory '${name}' requested`);\n    }\n    return this.factories[name];\n  }\n\n  withOptions(options, merge = false) {\n    this.options = merge ? { ...this.options, ...options } : options;\n  }\n\n  getAdapter(factory) {\n    return factory ?\n      (this.adapters[factory] || this.defaultAdapter) :\n      this.defaultAdapter;\n  }\n\n  addToCreatedList(adapter, models) {\n    if (!Array.isArray(models)) {\n      this.created.add([adapter, models]);\n    } else {\n      for (const model of models) {\n        this.created.add([adapter, model]);\n      }\n    }\n    return models;\n  }\n\n  cleanUp() {\n    const createdArray = [];\n    for (const c of this.created) {\n      createdArray.push(c);\n    }\n    const promise = createdArray.reduce(\n      (prev, [adapter, model]) =>\n        prev.then(() => adapter.destroy(model, model.constructor)),\n      Promise.resolve()\n    );\n    this.created.clear();\n    this.resetSeq();\n    return promise;\n  }\n\n  setAdapter(adapter, factoryNames = null) {\n    if (!factoryNames) {\n      this.defaultAdapter = adapter;\n    } else {\n      factoryNames = Array.isArray(factoryNames) ? factoryNames : [factoryNames];\n      factoryNames.forEach(name => {\n        this.adapters[name] = adapter;\n      });\n    }\n    return adapter;\n  }\n}\n\nexport function generatorThunk(factoryGirl, SomeGenerator) {\n  const generator = new SomeGenerator(factoryGirl);\n  return (...args) => () => generator.generate(...args);\n}\n\nfunction deprecate(method, see) {\n  return () => {\n    throw new Error(`The ${method} method has been deprecated, use ${see} instead`);\n  };\n}\n","import DefaultAdapter from './DefaultAdapter';\n\n/* eslint-disable no-unused-vars */\nexport default class ObjectAdapter extends DefaultAdapter {\n  build(Model, props) {\n    const model = new Model;\n    this.set(props, model, Model);\n    return model;\n  }\n  async save(model, Model) {\n    return model;\n  }\n  async destroy(model, Model) {\n    return model;\n  }\n  get(model, attr, Model) {\n    return model[attr];\n  }\n  set(props, model, Model) {\n    return Object.assign(model, props);\n  }\n}\n","import DefaultAdapter from './DefaultAdapter';\n\n/* eslint-disable no-unused-vars */\nexport default class BookshelfAdapter extends DefaultAdapter {\n  save(doc, Model) {\n    return doc.save(null, { method: 'insert' });\n  }\n}\n\n","import DefaultAdapter from './DefaultAdapter';\n\n/* eslint-disable no-unused-vars */\nexport default class MongooseAdapter extends DefaultAdapter {\n  async destroy(model, Model) {\n    return model.remove();\n  }\n}\n","import DefaultAdapter from './DefaultAdapter';\n\n/* eslint-disable no-unused-vars */\nexport default class SequelizeAdapter extends DefaultAdapter {\n  build(Model, props) {\n    return Model.build(props);\n  }\n}\n","import DefaultAdapter from './DefaultAdapter';\n\n/* eslint-disable no-unused-vars */\nexport default class ReduxORMAdapter extends DefaultAdapter {\n  constructor(session) {\n    super();\n    this.session = session;\n  }\n\n  build(modelName, props) {\n    return this.session[modelName].create(props);\n  }\n\n  get(model, attr) {\n    return model[attr];\n  }\n\n  async save(model, Model) {\n    return model;\n  }\n\n  async destroy(model, Model) {\n    return Promise.resolve(model.delete()).then(() => true);\n  }\n}\n","import FactoryGirl from './FactoryGirl';\n\nexport ObjectAdapter from './adapters/ObjectAdapter';\nexport BookshelfAdapter from './adapters/BookshelfAdapter';\nexport DefaultAdapter from './adapters/DefaultAdapter';\nexport MongooseAdapter from './adapters/MongooseAdapter';\nexport SequelizeAdapter from './adapters/SequelizeAdapter';\nexport ReduxORMAdapter from './adapters/ReduxORMAdapter';\n\nconst factory = new FactoryGirl();\nfactory.FactoryGirl = FactoryGirl;\n\nexport { factory };\n\nexport default factory;\n"],"names":["asyncPopulate","target","source","reject","Error","promises","map","promise","Array","isArray","attr","undefined","isPlainObject","resolve","then","v","all","objectProto","o","num","attrsArray","buildOptionsArray","length","createArrayOfObjects","parseAndValidateManyArgs","Factory","Model","initializer","options","name","buildOptions","attrs","Promise","extraAttrs","getFactoryAttrs","factoryAttrs","modelAttrs","filteredAttrs","reduce","hasOwnProperty","afterAttrs","adapter","buildCallbacks","model","build","afterBuild","buildModel","beforeCreate","save","afterCreate","savedModel","numArg","attrsArrayArg","buildOptionsArrayArg","models","i","push","create","obj","arr","Generator","factoryGirl","key","getAdapter","get","Sequence","id","callback","generateId","sequences","next","Assoc","getAttribute","AssocAttrs","AssocMany","createMany","AssocAttrsMany","attrsMany","chance","Chance","ChanceGenerator","chanceMethod","OneOf","possibleValues","size","randomIndex","Math","floor","random","value","DefaultAdapter","props","destroy","set","FactoryGirl","factories","adapters","created","assoc","generatorThunk","assocMany","assocBuild","deprecate","assocBuildMany","assocAttrs","assocAttrsMany","seq","sequence","resetSeq","resetSequence","reset","oneOf","defaultAdapter","getFactory","factory","parent","childInitializer","parentFactory","jointInitializer","resolveInitializer","addToCreatedList","createdModel","buildMany","throwError","merge","add","createdArray","c","prev","constructor","clear","factoryNames","forEach","SomeGenerator","generator","args","generate","method","see","ObjectAdapter","BookshelfAdapter","doc","MongooseAdapter","remove","SequelizeAdapter","ReduxORMAdapter","session","modelName","delete"],"mappings":"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"}